name: Build Static Site

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'

    - name: Install Dependencies
      run: npm install

    - name: Build
      run: npm run build

    # [新增] 调试步骤：列出当前目录下的所有文件
    # 这样如果报错，你可以点开这一步看看到底生成了什么文件夹
    - name: List Output Files (Debug)
      run: ls -al

    - name: Upload Artifact
      uses: actions/upload-artifact@v4
      with:
        name: flow-reader-dist
        # [修改] 这里尝试使用 build/ 文件夹
        # 如果你的项目生成的是其他名字（比如 out），请根据上面的 Debug 步骤修改这里
        path: build/
